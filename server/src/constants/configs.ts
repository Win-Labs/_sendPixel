import { Abi, Address, Chain } from "viem";
import { officeL1 } from "./chains";
import dotenv from "dotenv";
dotenv.config({ path: "./.env" });

const canvasOut = {
  abi: [
    { type: "receive", stateMutability: "payable" },
    {
      type: "function",
      name: "batchSend",
      inputs: [{ name: "amounts", type: "uint256[]", internalType: "uint256[]" }],
      outputs: [],
      stateMutability: "payable",
    },
    {
      type: "event",
      name: "PixelRegistered",
      inputs: [
        { name: "amount", type: "uint256", indexed: false, internalType: "uint256" },
        { name: "sender", type: "address", indexed: false, internalType: "address" },
      ],
      anonymous: false,
    },
  ],
  bytecode: {
    object:
      "0x6080604052348015600e575f80fd5b506106198061001c5f395ff3fe608060405260043610610021575f3560e01c8063820a6ca01461006557610061565b36610061577f66c0e2ba8fd8a927839287d236f2d1ef5d9cbacfbd2df002a0c8e7aa19d09f33343360405161005792919061023c565b60405180910390a1005b5f80fd5b61007f600480360381019061007a91906103ee565b610081565b005b5f805b82518110156100c2578281815181106100a05761009f610435565b5b6020026020010151826100b3919061048f565b91508080600101915050610084565b50803414610105576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100fc9061051c565b60405180910390fd5b5f5b82518110156101e0575f3073ffffffffffffffffffffffffffffffffffffffff1684838151811061013b5761013a610435565b5b602002602001015160405161014f90610567565b5f6040518083038185875af1925050503d805f8114610189576040519150601f19603f3d011682016040523d82523d5f602084013e61018e565b606091505b50509050806101d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101c9906105c5565b60405180910390fd5b508080600101915050610107565b505050565b5f819050919050565b6101f7816101e5565b82525050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610226826101fd565b9050919050565b6102368161021c565b82525050565b5f60408201905061024f5f8301856101ee565b61025c602083018461022d565b9392505050565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6102be82610278565b810181811067ffffffffffffffff821117156102dd576102dc610288565b5b80604052505050565b5f6102ef610263565b90506102fb82826102b5565b919050565b5f67ffffffffffffffff82111561031a57610319610288565b5b602082029050602081019050919050565b5f80fd5b610338816101e5565b8114610342575f80fd5b50565b5f813590506103538161032f565b92915050565b5f61036b61036684610300565b6102e6565b9050808382526020820190506020840283018581111561038e5761038d61032b565b5b835b818110156103b757806103a38882610345565b845260208401935050602081019050610390565b5050509392505050565b5f82601f8301126103d5576103d4610274565b5b81356103e5848260208601610359565b91505092915050565b5f602082840312156104035761040261026c565b5b5f82013567ffffffffffffffff8111156104205761041f610270565b5b61042c848285016103c1565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610499826101e5565b91506104a4836101e5565b92508282019050808211156104bc576104bb610462565b5b92915050565b5f82825260208201905092915050565b7f496e636f727265637420746f74616c20616d6f756e74000000000000000000005f82015250565b5f6105066016836104c2565b9150610511826104d2565b602082019050919050565b5f6020820190508181035f830152610533816104fa565b9050919050565b5f81905092915050565b50565b5f6105525f8361053a565b915061055d82610544565b5f82019050919050565b5f61057182610547565b9150819050919050565b7f5472616e73666572206661696c656400000000000000000000000000000000005f82015250565b5f6105af600f836104c2565b91506105ba8261057b565b602082019050919050565b5f6020820190508181035f8301526105dc816105a3565b905091905056fea26469706673582212201d0c4e573e3808ceb525c286fa2951844821d2324953b14e8ee521c1824aa90a64736f6c63430008190033",
    sourceMap: "57:642:0:-:0;;;;;;;;;;;;;;;;;;;",
    linkReferences: {},
  },
  deployedBytecode: {
    object:
      "0x608060405260043610610021575f3560e01c8063820a6ca01461006557610061565b36610061577f66c0e2ba8fd8a927839287d236f2d1ef5d9cbacfbd2df002a0c8e7aa19d09f33343360405161005792919061023c565b60405180910390a1005b5f80fd5b61007f600480360381019061007a91906103ee565b610081565b005b5f805b82518110156100c2578281815181106100a05761009f610435565b5b6020026020010151826100b3919061048f565b91508080600101915050610084565b50803414610105576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016100fc9061051c565b60405180910390fd5b5f5b82518110156101e0575f3073ffffffffffffffffffffffffffffffffffffffff1684838151811061013b5761013a610435565b5b602002602001015160405161014f90610567565b5f6040518083038185875af1925050503d805f8114610189576040519150601f19603f3d011682016040523d82523d5f602084013e61018e565b606091505b50509050806101d2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101c9906105c5565b60405180910390fd5b508080600101915050610107565b505050565b5f819050919050565b6101f7816101e5565b82525050565b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610226826101fd565b9050919050565b6102368161021c565b82525050565b5f60408201905061024f5f8301856101ee565b61025c602083018461022d565b9392505050565b5f604051905090565b5f80fd5b5f80fd5b5f80fd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b6102be82610278565b810181811067ffffffffffffffff821117156102dd576102dc610288565b5b80604052505050565b5f6102ef610263565b90506102fb82826102b5565b919050565b5f67ffffffffffffffff82111561031a57610319610288565b5b602082029050602081019050919050565b5f80fd5b610338816101e5565b8114610342575f80fd5b50565b5f813590506103538161032f565b92915050565b5f61036b61036684610300565b6102e6565b9050808382526020820190506020840283018581111561038e5761038d61032b565b5b835b818110156103b757806103a38882610345565b845260208401935050602081019050610390565b5050509392505050565b5f82601f8301126103d5576103d4610274565b5b81356103e5848260208601610359565b91505092915050565b5f602082840312156104035761040261026c565b5b5f82013567ffffffffffffffff8111156104205761041f610270565b5b61042c848285016103c1565b91505092915050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52603260045260245ffd5b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f610499826101e5565b91506104a4836101e5565b92508282019050808211156104bc576104bb610462565b5b92915050565b5f82825260208201905092915050565b7f496e636f727265637420746f74616c20616d6f756e74000000000000000000005f82015250565b5f6105066016836104c2565b9150610511826104d2565b602082019050919050565b5f6020820190508181035f830152610533816104fa565b9050919050565b5f81905092915050565b50565b5f6105525f8361053a565b915061055d82610544565b5f82019050919050565b5f61057182610547565b9150819050919050565b7f5472616e73666572206661696c656400000000000000000000000000000000005f82015250565b5f6105af600f836104c2565b91506105ba8261057b565b602082019050919050565b5f6020820190508181035f8301526105dc816105a3565b905091905056fea26469706673582212201d0c4e573e3808ceb525c286fa2951844821d2324953b14e8ee521c1824aa90a64736f6c63430008190033",
    sourceMap:
      "57:642:0:-:0;;;;;;;;;;;;;;;;;;;;;;;652:38;668:9;679:10;652:38;;;;;;;:::i;:::-;;;;;;;;57:642;;;;;139:465;;;;;;;;;;;;;:::i;:::-;;:::i;:::-;;;211:19;249:9;244:95;268:7;:14;264:1;:18;244:95;;;318:7;326:1;318:10;;;;;;;;:::i;:::-;;;;;;;;303:25;;;;;:::i;:::-;;;284:3;;;;;;;244:95;;;;370:11;357:9;:24;349:59;;;;;;;;;;;;:::i;:::-;;;;;;;;;424:9;419:179;443:7;:14;439:1;:18;419:179;;;479:12;505:4;497:18;;523:7;531:1;523:10;;;;;;;;:::i;:::-;;;;;;;;497:41;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;478:60;;;560:7;552:35;;;;;;;;;;;;:::i;:::-;;;;;;;;;464:134;459:3;;;;;;;419:179;;;;201:403;139:465;:::o;7:77:2:-;44:7;73:5;62:16;;7:77;;;:::o;90:118::-;177:24;195:5;177:24;:::i;:::-;172:3;165:37;90:118;;:::o;214:126::-;251:7;291:42;284:5;280:54;269:65;;214:126;;;:::o;346:96::-;383:7;412:24;430:5;412:24;:::i;:::-;401:35;;346:96;;;:::o;448:118::-;535:24;553:5;535:24;:::i;:::-;530:3;523:37;448:118;;:::o;572:332::-;693:4;731:2;720:9;716:18;708:26;;744:71;812:1;801:9;797:17;788:6;744:71;:::i;:::-;825:72;893:2;882:9;878:18;869:6;825:72;:::i;:::-;572:332;;;;;:::o;910:75::-;943:6;976:2;970:9;960:19;;910:75;:::o;991:117::-;1100:1;1097;1090:12;1114:117;1223:1;1220;1213:12;1237:117;1346:1;1343;1336:12;1360:102;1401:6;1452:2;1448:7;1443:2;1436:5;1432:14;1428:28;1418:38;;1360:102;;;:::o;1468:180::-;1516:77;1513:1;1506:88;1613:4;1610:1;1603:15;1637:4;1634:1;1627:15;1654:281;1737:27;1759:4;1737:27;:::i;:::-;1729:6;1725:40;1867:6;1855:10;1852:22;1831:18;1819:10;1816:34;1813:62;1810:88;;;1878:18;;:::i;:::-;1810:88;1918:10;1914:2;1907:22;1697:238;1654:281;;:::o;1941:129::-;1975:6;2002:20;;:::i;:::-;1992:30;;2031:33;2059:4;2051:6;2031:33;:::i;:::-;1941:129;;;:::o;2076:311::-;2153:4;2243:18;2235:6;2232:30;2229:56;;;2265:18;;:::i;:::-;2229:56;2315:4;2307:6;2303:17;2295:25;;2375:4;2369;2365:15;2357:23;;2076:311;;;:::o;2393:117::-;2502:1;2499;2492:12;2516:122;2589:24;2607:5;2589:24;:::i;:::-;2582:5;2579:35;2569:63;;2628:1;2625;2618:12;2569:63;2516:122;:::o;2644:139::-;2690:5;2728:6;2715:20;2706:29;;2744:33;2771:5;2744:33;:::i;:::-;2644:139;;;;:::o;2806:710::-;2902:5;2927:81;2943:64;3000:6;2943:64;:::i;:::-;2927:81;:::i;:::-;2918:90;;3028:5;3057:6;3050:5;3043:21;3091:4;3084:5;3080:16;3073:23;;3144:4;3136:6;3132:17;3124:6;3120:30;3173:3;3165:6;3162:15;3159:122;;;3192:79;;:::i;:::-;3159:122;3307:6;3290:220;3324:6;3319:3;3316:15;3290:220;;;3399:3;3428:37;3461:3;3449:10;3428:37;:::i;:::-;3423:3;3416:50;3495:4;3490:3;3486:14;3479:21;;3366:144;3350:4;3345:3;3341:14;3334:21;;3290:220;;;3294:21;2908:608;;2806:710;;;;;:::o;3539:370::-;3610:5;3659:3;3652:4;3644:6;3640:17;3636:27;3626:122;;3667:79;;:::i;:::-;3626:122;3784:6;3771:20;3809:94;3899:3;3891:6;3884:4;3876:6;3872:17;3809:94;:::i;:::-;3800:103;;3616:293;3539:370;;;;:::o;3915:539::-;3999:6;4048:2;4036:9;4027:7;4023:23;4019:32;4016:119;;;4054:79;;:::i;:::-;4016:119;4202:1;4191:9;4187:17;4174:31;4232:18;4224:6;4221:30;4218:117;;;4254:79;;:::i;:::-;4218:117;4359:78;4429:7;4420:6;4409:9;4405:22;4359:78;:::i;:::-;4349:88;;4145:302;3915:539;;;;:::o;4460:180::-;4508:77;4505:1;4498:88;4605:4;4602:1;4595:15;4629:4;4626:1;4619:15;4646:180;4694:77;4691:1;4684:88;4791:4;4788:1;4781:15;4815:4;4812:1;4805:15;4832:191;4872:3;4891:20;4909:1;4891:20;:::i;:::-;4886:25;;4925:20;4943:1;4925:20;:::i;:::-;4920:25;;4968:1;4965;4961:9;4954:16;;4989:3;4986:1;4983:10;4980:36;;;4996:18;;:::i;:::-;4980:36;4832:191;;;;:::o;5029:169::-;5113:11;5147:6;5142:3;5135:19;5187:4;5182:3;5178:14;5163:29;;5029:169;;;;:::o;5204:172::-;5344:24;5340:1;5332:6;5328:14;5321:48;5204:172;:::o;5382:366::-;5524:3;5545:67;5609:2;5604:3;5545:67;:::i;:::-;5538:74;;5621:93;5710:3;5621:93;:::i;:::-;5739:2;5734:3;5730:12;5723:19;;5382:366;;;:::o;5754:419::-;5920:4;5958:2;5947:9;5943:18;5935:26;;6007:9;6001:4;5997:20;5993:1;5982:9;5978:17;5971:47;6035:131;6161:4;6035:131;:::i;:::-;6027:139;;5754:419;;;:::o;6179:147::-;6280:11;6317:3;6302:18;;6179:147;;;;:::o;6332:114::-;;:::o;6452:398::-;6611:3;6632:83;6713:1;6708:3;6632:83;:::i;:::-;6625:90;;6724:93;6813:3;6724:93;:::i;:::-;6842:1;6837:3;6833:11;6826:18;;6452:398;;;:::o;6856:379::-;7040:3;7062:147;7205:3;7062:147;:::i;:::-;7055:154;;7226:3;7219:10;;6856:379;;;:::o;7241:165::-;7381:17;7377:1;7369:6;7365:14;7358:41;7241:165;:::o;7412:366::-;7554:3;7575:67;7639:2;7634:3;7575:67;:::i;:::-;7568:74;;7651:93;7740:3;7651:93;:::i;:::-;7769:2;7764:3;7760:12;7753:19;;7412:366;;;:::o;7784:419::-;7950:4;7988:2;7977:9;7973:18;7965:26;;8037:9;8031:4;8027:20;8023:1;8012:9;8008:17;8001:47;8065:131;8191:4;8065:131;:::i;:::-;8057:139;;7784:419;;;:::o",
    linkReferences: {},
  },
  methodIdentifiers: { "batchSend(uint256[])": "820a6ca0" },
  rawMetadata:
    '{"compiler":{"version":"0.8.25+commit.b61c2a91"},"language":"Solidity","output":{"abi":[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"},{"indexed":false,"internalType":"address","name":"sender","type":"address"}],"name":"PixelRegistered","type":"event"},{"inputs":[{"internalType":"uint256[]","name":"amounts","type":"uint256[]"}],"name":"batchSend","outputs":[],"stateMutability":"payable","type":"function"},{"stateMutability":"payable","type":"receive"}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{},"version":1}},"settings":{"compilationTarget":{"src/Canvas.sol":"Canvas"},"evmVersion":"cancun","libraries":{},"metadata":{"bytecodeHash":"ipfs"},"optimizer":{"enabled":false,"runs":200},"remappings":[":forge-std/=lib/forge-std/src/"]},"sources":{"src/Canvas.sol":{"keccak256":"0x31b8c69808f992d89d4fc2cf1021a9594d1d6cee549f1c4099a8df57646702e7","license":"MIT","urls":["bzz-raw://6912c4ea742e67b99e8523e0cfeda6c052ab77f8c4d9dee989dcde2d79fe3a41","dweb:/ipfs/QmQzL3wfYLyDGPWTbiK4SZi1TysPsYs8BVSP53rMDMFGmY"]}},"version":1}',
  metadata: {
    compiler: { version: "0.8.25+commit.b61c2a91" },
    language: "Solidity",
    output: {
      abi: [
        {
          inputs: [
            { internalType: "uint256", name: "amount", type: "uint256", indexed: false },
            { internalType: "address", name: "sender", type: "address", indexed: false },
          ],
          type: "event",
          name: "PixelRegistered",
          anonymous: false,
        },
        {
          inputs: [{ internalType: "uint256[]", name: "amounts", type: "uint256[]" }],
          stateMutability: "payable",
          type: "function",
          name: "batchSend",
        },
        { inputs: [], stateMutability: "payable", type: "receive" },
      ],
      devdoc: { kind: "dev", methods: {}, version: 1 },
      userdoc: { kind: "user", methods: {}, version: 1 },
    },
    settings: {
      remappings: ["forge-std/=lib/forge-std/src/"],
      optimizer: { enabled: false, runs: 200 },
      metadata: { bytecodeHash: "ipfs" },
      compilationTarget: { "src/Canvas.sol": "Canvas" },
      evmVersion: "cancun",
      libraries: {},
    },
    sources: {
      "src/Canvas.sol": {
        keccak256: "0x31b8c69808f992d89d4fc2cf1021a9594d1d6cee549f1c4099a8df57646702e7",
        urls: [
          "bzz-raw://6912c4ea742e67b99e8523e0cfeda6c052ab77f8c4d9dee989dcde2d79fe3a41",
          "dweb:/ipfs/QmQzL3wfYLyDGPWTbiK4SZi1TysPsYs8BVSP53rMDMFGmY",
        ],
        license: "MIT",
      },
    },
    version: 1,
  },
  id: 0,
};

const canvasDeployerAbi = [
  {
    type: "function",
    name: "deployCanvas",
    inputs: [
      { name: "_width", type: "uint256", internalType: "uint256" },
      { name: "_height", type: "uint256", internalType: "uint256" },
    ],
    outputs: [{ name: "", type: "address", internalType: "address" }],
    stateMutability: "nonpayable",
  },
  {
    type: "event",
    name: "CanvasDeployed",
    inputs: [
      { name: "deployedCanvasContract", type: "address", indexed: false, internalType: "address" },
      { name: "height", type: "uint256", indexed: false, internalType: "uint256" },
      { name: "width", type: "uint256", indexed: false, internalType: "uint256" },
    ],
    anonymous: false,
  },
];

function getChainConfig(prefix: string, chain: Chain) {
  const canvasDeployerAddress = process.env[`VITE_${prefix}_CONTRACT_ADDRESS`] as Address;
  const contractOwnerPrivateKey = process.env[`VITE_${prefix}_CONTRACT_OWNER_PRIVATE_KEY`] as Address;
  const faucetAmount = process.env[`VITE_${prefix}_FAUCET_AMOUNT`];

  // Collect up to 10 private keys if defined
  const faucetPrivateKeys: string[] = [];
  for (let i = 0; i < 10; i++) {
    const key = process.env[`VITE_${prefix}_FAUCET_PRIVATE_KEY_${i}`];
    if (key) {
      faucetPrivateKeys.push(key);
    }
  }

  return {
    chain,
    canvasDeployerAddress,
    canvasDeployerAbi,
    canvasOut,
    contractOwnerPrivateKey,
    faucetAmount,
    faucetPrivateKeys,
  };
}

const officeL1Config = getChainConfig("OFFICE_L1", officeL1);

export { officeL1Config };
